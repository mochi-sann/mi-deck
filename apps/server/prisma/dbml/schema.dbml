//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id String [pk]
  email String [unique, not null]
  name String
  password String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  serverSession ServerSession [not null]
  userSettings UserSetting [not null]
  userRole UserRole [not null, default: 'USER']
  userInfo UserInfo [not null]
}

Table UserSetting {
  id String [pk]
  userId String [not null]
  user User [not null]
  key String [not null]
  value String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table ServerSession {
  id String [pk]
  userId String [not null]
  user User [not null]
  origin String [not null]
  serverToken String [not null]
  serverType ServerType [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  panels Panel [not null]
  serverInfo ServerInfo
  serverUserInfo UserInfo
  timeline Timeline [not null]

  indexes {
    (origin, userId) [unique]
  }
}

Table ServerInfo {
  id String [pk]
  serverSessionId String [unique, not null]
  serverSession ServerSession [not null]
  name String [not null]
  iconUrl String [not null]
  faviconUrl String [not null]
  themeColor String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table UserInfo {
  id String [pk]
  name String [not null]
  username String [not null]
  avatarUrl String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  serverSession ServerSession [not null]
  serverSEssionId String [unique, not null]
  user User
  userId String
}

Table Panel {
  id String [pk]
  serverSessionId String [not null]
  serverSession ServerSession [not null]
  type String [not null]
}

Table Timeline {
  id String [pk]
  serverSessionId String [not null]
  serverSession ServerSession [not null]
  name String [not null]
  type TimelineType [not null]
  listId String
  channelId String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Enum UserRole {
  ADMIN
  USER
}

Enum ServerType {
  Misskey
  OtherServer
}

Enum TimelineType {
  HOME
  LOCAL
  GLOBAL
  LIST
  USER
  CHANNEL
}

Ref: UserSetting.userId > User.id

Ref: ServerSession.userId > User.id

Ref: ServerInfo.serverSessionId - ServerSession.id

Ref: UserInfo.serverSEssionId - ServerSession.id

Ref: UserInfo.userId > User.id

Ref: Panel.serverSessionId > ServerSession.id

Ref: Timeline.serverSessionId > ServerSession.id [delete: Cascade]